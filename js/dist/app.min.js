!function(){var e={init:function(){this.cache.breakAmount.innerHTML=this.cache.breakTime,this.cache.sessionAmount.innerHTML=this.cache.sessionTime,this.cache.minuteHand.innerHTML=this.cache.sessionTime,this.cache.breakIncrease.addEventListener("click",this.changeSetting),this.cache.breakDecrease.addEventListener("click",this.changeSetting),this.cache.sessionIncrease.addEventListener("click",this.changeSetting),this.cache.sessionDecrease.addEventListener("click",this.changeSetting),this.cache.clock.addEventListener("click",this.startTimer),this.cache.reset.addEventListener("click",this.resetTimer)},cache:{clock:document.getElementById("clock"),timerStarted:!1,sessionCurrentTime:!1,breakCurrentTime:!1,seconds:60,breakTime:5,sessionTime:25,breakIndicatorLevel:0,sessionIndicatorLevel:0,alarmSound:"http://soundbible.com/grab.php?id = 1599&type=wav",breakAmount:document.getElementById("break-amount"),sessionAmount:document.getElementById("session-amount"),breakIncrease:document.getElementById("break-increase"),breakDecrease:document.getElementById("break-decrease"),sessionIncrease:document.getElementById("session-increase"),sessionDecrease:document.getElementById("session-decrease"),breakIndicator:document.getElementById("break-indicator"),sessionIndicator:document.getElementById("session-indicator"),clockType:document.getElementById("clock-type"),minuteHand:document.getElementById("minutes"),secondHand:document.getElementById("seconds"),reset:document.getElementById("reset")},changeSetting:function(){var n=this.id,s=e.cache;switch(e.resetTimer(),n){case"break-increase":s.breakTime+=60!==s.breakTime?1:0,s.breakAmount.innerHTML=s.breakTime;break;case"break-decrease":s.breakTime-=1!==s.breakTime?1:0,s.breakAmount.innerHTML=s.breakTime;break;case"session-increase":s.sessionTime+=120!==s.sessionTime?1:0,s.sessionAmount.innerHTML=s.sessionTime,s.minuteHand.innerHTML=s.sessionTime;break;case"session-decrease":s.sessionTime-=1!==s.sessionTime?1:0,s.sessionAmount.innerHTML=s.sessionTime,s.minuteHand.innerHTML=s.sessionTime}},startTimer:function(){var n=e.cache,s=new Audio(n.alarmSound);n.sessionCurrentTime!==!1&&n.breakCurrentTime!==!1||(n.sessionCurrentTime=n.sessionTime,n.breakCurrentTime=n.breakTime),n.timerStarted===!1?(n.sessionTime===parseInt(n.sessionAmount.innerHTML)&&(n.sessionTime-=1),n.breakTime===parseInt(n.breakAmount.innerHTML)&&(n.breakTime-=1),n.timerStarted=setInterval(function(){n.seconds-=1,n.secondHand.innerHTML=":"+n.seconds,n.seconds<10&&(n.secondHand.innerHTML=":0"+n.seconds),"Session"===n.clockType.innerHTML?(n.sessionIndicatorLevel+=182/(60*n.sessionCurrentTime),n.sessionIndicator.setAttribute("style","height:"+n.sessionIndicatorLevel+"px;"),n.minuteHand.innerHTML=n.sessionTime,0===n.seconds&&(n.sessionTime-=1,n.secondHand.innerHTML=":0"+n.seconds,n.sessionTime<0&&(s.play(),n.minuteHand.innerHTML=n.breakTime+1,n.clockType.innerHTML="Break!",n.sessionTime=parseInt(n.sessionAmount.innerHTML)-1),n.seconds=60)):(n.breakIndicatorLevel+=182/(60*n.breakCurrentTime),n.breakIndicator.setAttribute("style","height:"+n.breakIndicatorLevel+"px;"),n.minuteHand.innerHTML=n.breakTime,0===n.seconds&&(n.breakTime-=1,n.secondHand.innerHTML=":0"+n.seconds,n.breakTime<0&&(s.play(),n.sessionIndicator.setAttribute("style","height: 0px;"),n.breakIndicator.setAttribute("style","height: 0px;"),n.sessionIndicatorLevel=0,n.breakIndicatorLevel=0,n.clockType.innerHTML="Session",n.minuteHand.innerHTML=n.sessionTime+1,n.breakTime=parseInt(n.breakAmount.innerHTML)-1),n.seconds=60))},1e3)):e.stopTimer()},stopTimer:function(){clearInterval(e.cache.timerStarted),e.cache.timerStarted=!1},resetTimer:function(){var n=e.cache;e.stopTimer(),n.sessionTime=parseInt(n.sessionAmount.innerHTML),n.breakTime=parseInt(n.breakAmount.innerHTML),n.seconds=60,n.sessionIndicatorLevel=0,n.breakIndicatorLevel=0,n.sessionCurrentTime=!1,n.breakCurrentTime=!1,n.sessionIndicator.setAttribute("style","height: 0px;"),n.breakIndicator.setAttribute("style","height: 0px;"),n.sessionAmount.innerHTML=n.sessionTime,n.clockType.innerHTML="Session",n.breakAmount.innerHTML=n.breakTime,n.sessionAmount.innerHTML=n.sessionTime,n.minuteHand.innerHTML=n.sessionTime,n.secondHand.innerHTML=""}};e.init()}();